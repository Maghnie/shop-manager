flowchart TD
    UI[DateRangeSelector Component] --> |User changes date| Handler{Date Change Handler}
    Handler --> Validation[Date Validation]
    Validation --> |Valid| StateUpdate[Update Dashboard State]
    Validation --> |Invalid| ErrorDisplay[Display Error Message]
    
    StateUpdate --> DashboardState[SalesAnalyticsDashboard State]
    DashboardState --> |dateRange.startDate<br/>dateRange.endDate| Hooks{React Query Hooks}
    
    Hooks --> TimeSeriesHook[useSalesTimeSeries]
    Hooks --> HeatmapHook[useSalesHeatmapData]
    
    TimeSeriesHook --> |filters: {resolution, start_date, end_date}| TrendsService[AnalyticsService.getSalesReportTrends]
    HeatmapHook --> |resolution, startDate, endDate| HeatmapService[AnalyticsService.getSalesHeatmapData]
    
    TrendsService --> |URLSearchParams| TrendsAPI["/reports/sales-reports/trends/?start_date=X&end_date=Y"]
    HeatmapService --> |calls getSalesReports| ReportsService[AnalyticsService.getSalesReports]
    ReportsService --> |URLSearchParams| ReportsAPI["/reports/sales-reports/?start_date=X&end_date=Y"]
    
    TrendsAPI --> |HTTP GET| Backend[(Backend API)]
    ReportsAPI --> |HTTP GET| Backend
    
    Backend --> |Response Data| QueryCache[React Query Cache]
    QueryCache --> |Updated Data| Charts[TimeSeriesChart & SalesHeatmap]
    
    style UI fill:#e1f5fe
    style Handler fill:#f3e5f5
    style Validation fill:#fff3e0
    style StateUpdate fill:#e8f5e8
    style ErrorDisplay fill:#ffebee
    style DashboardState fill:#f1f8e9
    style Hooks fill:#e0f2f1
    style Backend fill:#fce4ec
    style Charts fill:#f3e5f5